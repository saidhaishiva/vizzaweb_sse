<div class="container dashboard h-100" fxLayoutAlign="center center" *ngIf="firstPage">
  <div class="row" fxLayoutAlign="center start">
    <div class="col-md-7 col-sm-12 col-xs-12">
      <mat-card class="mat-radius">
        <mat-card-header fxLayoutAlign="space-between center">
          <h2>Health Insurance</h2>
          <button mat-icon-button color="accent">
            <mat-icon aria-label="Example icon-button with a heart icon">favorite</mat-icon>
          </button>
        </mat-card-header>
        <mat-card-content>
          <p>The Health Insurance plans that We at Vizza Provide are the best rated
            throughout the Insurance Market.</p>
          <p> We provide you with all the adequate and necessary information
            beforehand, so that you can choose the best plans to protect your
            loved ones, just as we wouldâ€¦</p>
          <figure fxLayoutAlign="center center"><img src="assets/img/Vaidhini-&-Kid2.png" style="width: 100%" alt=""> </figure>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-md-4 col-sm-12 col-xs-12">
      <mat-card>
        <mat-card-header><h5>Health Insurance plans for..</h5></mat-card-header>

        <mat-form-field class="w-100">
          <mat-select placeholder="SUM INSURED" [(ngModel)]="selectedAmount" name="suminsure" (change)="changeAmount()" (click)="checkNetwork()">
            <mat-option *ngFor="let amounts of sumInsuredAmountLists" [value]="amounts.si_id">
              {{amounts.si_amount}}
            </mat-option>
          </mat-select>
          <!--<mat-icon matSuffix>attach_money</mat-icon>-->
        </mat-form-field>
        <div *ngIf="sumerror" class="ngError">Required</div>

        <div class="w-100 mb-2 son" >
          <div id="clonehead" >
            <div class="row" fxLayoutAlign="center center" *ngFor="let item of setArray; let i = index">
              <div class="col-md-2"><mat-checkbox [(ngModel)]="item.checked" [disabled]="item.disabled" (change)="ckeckedUser(item.checked, i, item.name)" ></mat-checkbox></div>
              <div class="col-md-3">{{item.name}}</div>
              <div class="col-md-5"> <mat-form-field class="w-100">
                <input matInput placeholder="Age" name="age" [(ngModel)]="item.age" [disabled]="item.disabled" maxlength="3" (keypress)="numberOnly($event)" (keyup)="typeAge(i,item.age)">
              </mat-form-field>
                <div *ngIf="item.error != ''" class="ngError">Required</div>
              </div>
              <!--<div class="col-md-2">-->
              <!--<button mat-button [hidden]="item.auto" matSuffix mat-icon-button aria-label="Clear" (click)="addUser(i)">-->
              <!--<i class="material-icons">-->
              <!--add-->
              <!--</i>-->
              <!--</button>-->

              <!--</div>-->
            </div>
          </div>
          <div class="mt-3">
            <button mat-raised-button color="primary" type="button" [disabled]="sonBTn" (click)="addUser('Son', 2)"><i class="material-icons">add_circle_outline</i> Son</button>
            <button mat-raised-button color="accent" class="accentDaughter" type="button" [disabled]="daughterBTn" (click)="addUser('Daughter', 3)"><i class="material-icons">add_circle_outline</i> Daughter</button>

            <button mat-raised-button color="accent" type="button" [matMenuTriggerFor]="menu"><i class="material-icons">add_circle_outline</i> OTHERS</button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="addOthers('Father')" [disabled]="fatherBTn">Father</button>
              <button mat-menu-item (click)="addOthers('Mother')" [disabled]="motherBtn">Mother</button>
              <button mat-menu-item (click)="addOthers('Father In Law')" [disabled]="fatherInLawBTn">Father-In-Law</button>
              <button mat-menu-item (click)="addOthers('Mother In Law')" [disabled]="motherInLawBtn">Mother-In-Law</button>
              <button mat-menu-item (click)="addOthers('Brother')">Brother</button>
              <button mat-menu-item (click)="addOthers('Sister')">Sister</button>
            </mat-menu>
          </div>
        </div>
        <mat-form-field class="w-100">
          <input matInput maxlength="6" [(ngModel)]="pincoce"  placeholder="PIN CODE" (keypress)="numberOnly($event)" (keyup)="selectPincode()">
          <mat-icon matSuffix>place</mat-icon>
        </mat-form-field>
        <div *ngIf="pinerror" class="ngError">Required</div>
        <div fxLayoutAlign="center center" class="mt-3">
          <button mat-raised-button color="accent" type="button" (click)="getPolicyQuotationList()">Submit</button>
        </div>

      </mat-card>
    </div>
  </div>
</div>

<!--second page-->

<div class="row " id="product-list" fxLayoutAlign="center start">
  <div class="col-sm-9">
    <div fxLayout="column" *ngIf="secondPage">
      <div class="flex-p">
        <mat-card>
          <mat-card-header fxLayoutAlign="left left">
          </mat-card-header>
          <mat-card-content>
            <h4 class="color-pink"><img  src="assets/img/health-icon.png" class="h-icon" alt="5"> Health Insurance</h4>
            <mat-tab-group #tabGroup [selectedIndex]="tabIndex" (selectedIndexChange)="onSelectedIndexChange($event)">
              <mat-tab class="headerColor" *ngFor="let lists of insuranceLists;let pi = index" label="{{lists.name | uppercase}}" (click)="changeTab()">

                <table class="table health-table" *ngIf="lists.product_lists !='' ">
                  <thead>
                  <tr>
                    <th>INSURER</th>
                    <th>SUM INSURED</th>
                    <th>KEY FEATURES</th>
                    <th>SHORTLIST / COMPARE</th>
                    <th>PREMIUM</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr class="" *ngFor="let plists of lists.product_lists;let i = index">
                    <td *ngIf="plists.error">
                      {{plists.error}}
                    </td>
                    <td>
                      <p class="color-green">{{plists.product_name }}</p>
                      <img  src="{{webhost + '/' + plists.company_logo}}" style="width: 100px;" alt="5">
                    </td>
                    <td>
                      <p>{{plists.suminsured_amount | currency: 'INR'}}</p>
                    </td>
                    <td style="width: 40%">

                      <div class="row" fxLayoutAlign="left center" *ngFor="let keys of plists.key_features">
                        <div class="col-md-6 ">
                          <li>{{keys.key_features_name}}</li>
                        </div>
                        <div class="col-md-6 ">
                          <!--<a style="color: #777272f0" *ngIf="keys.key_features_value == ''">-</a>-->
                          <a style="color: #777272f0">{{keys.key_features_value}}</a>
                        </div>
                      </div>

                      <div class="text-right pr-2 pl-2">
                        <p class="linkClor" style="cursor: pointer" (click)="viewKeyList(plists)">View Details / Product Documents</p>
                      </div>

                    </td>
                    <td>
                      <!--<p><button mat-raised-button color="primary1" style="color:#fff;" [hidden]="plists.shortlist" (click)="addShortlist(plists, pi, i, lists.enquiry_id, lists.name)">Add to Shortlist</button></p>-->
                      <!--<p><button mat-raised-button color="accentRemove" *ngIf="plists.removebtn" (click)="removeShortlist(plists, pi, i, lists.enquiry_id, plists.shortlist_id)">Remove from Shortlist</button></p>-->
                      <!--<p><button mat-raised-button disabled *ngIf="plists.shortlist && plists.currentBtn">Add to Shortlist</button></p>-->


                      <p><button mat-raised-button color="primary" [hidden]="plists.compare"  (click)="addCompare(plists, pi, i, lists.enquiry_id, lists.name)">Add to Compare</button></p>
                      <p><button mat-raised-button disabled *ngIf="plists.compare">Add to Compare</button></p>
                    </td>
                    <td>
                      <p class="text-center">{{plists.premium_amount | currency: 'INR'}} / Yr</p>
                      <p><button mat-raised-button color="accent" (click)="buyProduct(plists, lists.enquiry_id,lists.name)">Buy</button></p>
                    </td>
                  </tr>

                  </tbody>
                </table>
                <table class="table health-table" *ngIf="lists.product_lists =='' ">
                  <th class="text-center" class="color-pink"> No product matched your selection </th>
                </table>
                <!--</mat-card-content>-->
                <mat-divider></mat-divider>
                <!--</mat-card>-->

              </mat-tab>
              <!--<mat-tab label="SHORLIST {{shortListCount}}" [disabled]="!nonEditable">-->
                <!--<table class="table health-table">-->
                  <!--<thead>-->
                  <!--<tr>-->
                    <!--<th>Group</th>-->
                    <!--<th>INSURER</th>-->
                    <!--<th>SUM INSURED</th>-->
                    <!--<th>KEY FEATURES</th>-->
                    <!--<th>INDIVIDUAL PREMIUM</th>-->
                    <!--<th>PREMIUM</th>-->
                  <!--</tr>-->
                  <!--</thead>-->
                  <!--<tbody>-->
                  <!--<tr class="" *ngFor="let plists of shortlistArray;let i = index">-->
                    <!--<td>-->
                      <!--<p class="color-green">{{plists.group_name }}</p>-->
                    <!--</td>-->
                    <!--<td>-->
                      <!--<p class="color-green">{{plists.product_name }}</p>-->
                      <!--<img  src="{{webhost + '/' + plists.company_logo}}" style="width: 100px;" alt="5">-->
                    <!--</td>-->
                    <!--<td>-->
                      <!--<p>{{plists.suminsured_amount | currency: 'INR'}}</p>-->
                    <!--</td>-->
                    <!--<td style="width: 40%">-->
                      <!--<div class="row" fxLayoutAlign="left center" *ngFor="let keys of plists.key_features">-->
                        <!--<div class="col-md-6 ">-->
                          <!--<li>{{keys.key_features_name}}</li>-->
                        <!--</div>-->
                        <!--<div class="col-md-6 ">-->
                          <!--<a style="color: #777272f0">{{keys.key_features_value}}</a>-->
                        <!--</div>-->
                      <!--</div>-->

                    <!--</td>-->
                    <!--<td>-->
                      <!--<p>{{plists.premium_amount | currency: 'INR'}}</p>-->
                      <!--<p><button mat-raised-button color="accentRemove" *ngIf="plists.removebtn" (click)="removeShortlistPage(plists, pi, i, plists.enq_id, plists.shortlist_id)">Remove from Shortlist</button></p>-->
                      <!--<p><button mat-raised-button color="accent">Buy</button></p>-->
                    <!--</td>-->
                    <!--<td >-->
                      <!--<p>{{plists.premium_amount | currency: 'INR'}}</p>-->
                      <!--<p><button mat-raised-button color="accent">Buy</button></p>-->
                    <!--</td>-->
                  <!--</tr>-->

                  <!--</tbody>-->
                <!--</table>-->
              <!--</mat-tab>-->
            </mat-tab-group>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
  </div>
  <div class="col-md-3 product-choose"  [ngClass]="{'non-editable': nonEditable}">

    <div  *ngIf="secondPage" >
      <div class="row" fxLayoutAlign="left center">
        <div class="col-md-12">
          <mat-card class="custom-card">
            <mat-card-header class="p-2" >
              <mat-card-title class="m-0">
                <h6>Your Selections</h6>
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <div class="row" fxLayoutAlign="left center">
                <mat-radio-group><br>
                  <mat-radio-button [checked]="true" value="1">{{currentGroupName}}</mat-radio-button>
                </mat-radio-group>
              </div>

              <div class="row" fxLayoutAlign="left center">
                <div class="col-md-6">
                  <span>Sum Assured</span>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="w-100">
                    <mat-select [(ngModel)]="changeSuninsuredAmount" name="suminsure" (change)="changeSuminsured($event)">
                      <mat-option  *ngFor="let amounts of sumInsuredAmountLists" [value]="amounts.si_id">
                        {{amounts.si_amount}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>

              <div class="row" fxLayoutAlign="center center" *ngFor="let item of setArray; let i = index">
                <div class="col-md-2"><mat-checkbox [(ngModel)]="item.checked" *ngIf="item.auto" [disabled]="true" (change)="ckeckedUser(item.checked, i, item.name)" ></mat-checkbox></div>
                <div class="col-md-4" *ngIf="item.auto">{{item.name}}</div>
                <div class="col-md-6" *ngIf="item.auto"> <mat-form-field class="w-100" >
                  <input matInput placeholder="age" name="age" [(ngModel)]="item.age" (change)="ageChange()">
                </mat-form-field>
                </div>

              </div>
              <div class="row" fxLayoutAlign="left center">
                <div class="col-md-6">
                  <span>City Pincode</span>
                </div>
                <div class="col-md-6">
                  <mat-form-field class="w-100">
                    <input matInput name="pin" name="pin" [disabled]="true"  [(ngModel)]="pincoce">
                  </mat-form-field>
                </div>
              </div>
              <div fxLayoutAlign="center center" class="son">
                <button mat-raised-button color="accent" type="button" (click)="updateFunction()">Update</button>
              </div>

            </mat-card-content>
          </mat-card>
        </div>
      </div>


    </div>
  </div>
</div>
<div class="row" *ngIf="compareArray != ''">
  <div class="col-md-3" *ngFor="let clists of compareArray; let i = index">
    <div fxLayout="column" class="flex-p">
      <mat-card class="custom-card compare-icon text-center">
        <div class="text-right closeBtnClass">
          <mat-icon (click)="removeCompare(i, clists.index, tabIndex)">close</mat-icon>
        </div>
        <mat-card-content class="p-0">
          <p class="color-green mb-0 text-center">{{clists.product_name}}</p>
          <img mat-card-image  src="{{webhost + '/' + clists.company_logo}}" >
        </mat-card-content>
      </mat-card>
    </div>
  </div>
  <div class="col-md-2" fxLayoutAlign="left center" *ngIf="compareArray != ''">
    <button mat-raised-button color="accent" (click)="compareList(compareArray)">COMPARE NOW</button>
  </div>
</div>
