<div class="container-fluid">
    <div class="row proposal">
        <div class="col-md-12">
            <mat-horizontal-stepper  #stepper>
                <mat-step [stepControl]="personal">
                    <ng-template matStepLabel>PROPOSER DETAILS</ng-template>
                    <mat-accordion class="mt-4 w-100 float-left">
                        <form [formGroup]="personal" >
                            <mat-expansion-panel expanded>
                                <mat-expansion-panel-header>
                                    <mat-panel-title> Group A </mat-panel-title>
                                </mat-expansion-panel-header>

                                <div class="row mt-3">
                                    <div class="col-md-12 box-card pt-3">
                                        <h6 class="color-green">PROPOSER DETAILS</h6>
                                        <div class="row">
                                            <div class="col-md-2">
                                                <mat-form-field class="w-100">
                                                    <mat-select placeholder="Title" formControlName="personalTitle" (change)="changeGender()">
                                                        <mat-option value="MR">Mr</mat-option>
                                                        <mat-option value="MS">Ms</mat-option>
                                                        <mat-option value="MRS">Mrs</mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="personal.controls.personalTitle.errors?.required">Title is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="First Name" formControlName="personalFirstname"  (keypress)="data($event)"  autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.personalFirstname.errors?.required">First Name is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Mid Name" formControlName="personalMidname"  (keypress)="data($event)"   autocomplete="off">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Last Name" formControlName="personalLastname"  (keypress)="data($event)"   autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.personalLastname.errors?.required">Last Name is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Gender" formControlName="personalGender" required readonly>
                                                    <mat-error *ngIf="personal.controls.personalGender.errors?.required">Gender is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <mat-select  placeholder="Marital Status" formControlName="maritalStatus" required  class="w-100">
                                                        <mat-option *ngFor="let status of maritalDetail" [value]= 'status.marital_status_id'> {{status.marital_status}} </mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="personal.controls.maritalStatus.errors?.required">Marital Status is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <mat-select  placeholder="Occupation" formControlName="occupation" required  class="w-100">
                                                        <mat-option *ngFor="let list of occupationList" [value]= 'list.occupation_id'> {{list.occupation_name}} </mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="personal.controls.occupation.errors?.required">Occupation is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <mat-select  placeholder="Nationality" formControlName="nationality" required  class="w-100">
                                                        <mat-option *ngFor="let list of nationalityList" [value]= 'list.nationality_id'> {{list.nationality}} </mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="personal.controls.nationality.errors?.required">Occupation is required</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput [matDatepicker]="picker" [max]="today" placeholder="DOB (DD/MM/YYYY)"   formControlName="personalDob" (dateInput)="addEvent( $event)" (dateChange)="addEvent( $event)"  (keypress)="add($event)"
                                                           autocomplete="off"   required>
                                                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                                    <mat-datepicker #picker></mat-datepicker>
                                                    <mat-error *ngIf="personal.controls.personalDob.errors?.required">DOB is required</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="PAN Number"  minlength="10"  maxlength="10" pattern="^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$" formControlName="personalPan"  autocomplete="off">
                                                    <mat-error *ngIf="personal.controls.personalPan.hasError('minlength')">PAN Number isn't long enough, minimum of 10 characters</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalPan.hasError('pattern')"> Enter Valid PAN Number </mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Email ID"   formControlName="personalEmail"  autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalEmail.errors?.required">Email ID is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalEmail.hasError('pattern')">Please Enter Correct Format</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Mobile Number"  (keypress)="keyPress($event)"   maxlength="10" formControlName="personalMobile" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalMobile.errors?.required">Mobile Number is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalMobile.hasError('pattern')">Enter Valid  Mobile Number</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Phone Number"  (keypress)="keyPress($event)"   maxlength="10" formControlName="personalPhone" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalPhone.errors?.required">Phone Number is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalPhone.hasError('pattern')">Enter Valid  Phone Number</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Alternate Number"   maxlength="20"  formControlName="personalAltnumber" (keyup)="alternateChange($event)" (keypress)="keyPress($event)" autocomplete="off">
                                                    <mat-error *ngIf="personal.controls.personalAltnumber.errors?.required">Alternate Number is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalAltnumber.hasError('pattern')">Enter Valid  Mobile Number</mat-error>
                                                </mat-form-field>
                                                <div class="error" *ngIf="mobileNumber != '' && mobileNumber != 'true'">{{mobileNumber}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12 box-card pt-3">
                                        <h6 class="color-green"> PROPOSER COMMUNICATION ADDRESS</h6>
                                        <div class="row">
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 1" rows="2" formControlName="personalAddress" autocomplete="off" required></textarea>
                                                    <mat-error *ngIf="personal.controls.personalAddress.errors?.required">Address is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 2" rows="2" formControlName="personalAddress2" autocomplete="off" required></textarea>
                                                    <mat-error *ngIf="personal.controls.personalAddress2.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 3" rows="2" formControlName="personalAddress3" autocomplete="off"></textarea>
                                                    <mat-error *ngIf="personal.controls.personalAddress3.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="PIN Code"  pattern="[1-9][0-9]{5}" (keypress)="add($event)" minlength="6"   maxlength="6" (input)="commonPincode($event.target.value, 'proposalP')" formControlName="personalPincode" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalPincode.hasError('minlength')">Pin should be 6 digits</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalPincode.hasError('required')">Pincode required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalPincode.hasError('pattern')">Enter Valid  Pin</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                            <mat-form-field class="w-100">
                                                <input matInput placeholder="Country" formControlName="personalCountry" autocomplete="off" required readonly>
                                                <mat-error *ngIf="personal.controls.personalCountry.errors?.required">Country is required</mat-error>
                                            </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="State" formControlName="personalState" autocomplete="off" required readonly>
                                                    <mat-error *ngIf="personal.controls.personalState.errors?.required">State is required</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                            <mat-form-field  class="w-100">
                                                <input matInput placeholder="District" formControlName="personalDistrict" autocomplete="off" required>
                                                <mat-error *ngIf="personal.controls.personalDistrict.errors?.required">District is required</mat-error>
                                            </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="City" formControlName="personalCity" autocomplete="off" required readonly>
                                                    <mat-error *ngIf="personal.controls.personalCity.errors?.required">City is required</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="Area" formControlName="personalArea" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalArea.errors?.required">Area is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Mobile Number"  (keypress)="keyPress($event)"   maxlength="10" formControlName="personalMobile2" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalMobile2.errors?.required">Mobile Number is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalMobile2.hasError('pattern')">Enter Valid  Mobile Number</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Phone Number"  (keypress)="keyPress($event)"   maxlength="10" formControlName="personalPhone2" autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalPhone2.errors?.required">Phone Number is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalPhone2.hasError('pattern')">Enter Valid  Phone Number</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                            <mat-form-field class="w-100">
                                            <input matInput placeholder="Fax"  (keypress)="keyPress($event)"   maxlength="10" formControlName="personalEmail2" autocomplete="off">
                                            <mat-error *ngIf="personal.controls.personalFax.errors?.required">fax is required</mat-error>
                                            </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Email ID"   formControlName="personalEmail2"  autocomplete="off" required>
                                                    <mat-error *ngIf="personal.controls.personalEmail2.errors?.required">Email ID is required</mat-error>
                                                    <mat-error *ngIf="personal.controls.personalEmail2.hasError('pattern')">Please Enter Correct Format</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Nearest Land Mark" formControlName="personalNearestLandMark" autocomplete="off"  >
                                                </mat-form-field>
                                            </div>

                                    </div>
                                    </div>
                                    <div class="col-md-12 box-card pt-3">
                                        <h6 class="color-green">PROPOSER RESIDENCE ADDRESS</h6>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <mat-checkbox formControlName="sameas" (change)="sameAddress($event)" [disabled]="isDisable"><strong>Same as Communication Address</strong></mat-checkbox>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 1" rows="2" formControlName="residenceAddress" required autocomplete="off" [readonly]="inputReadonly"></textarea>
                                                    <mat-error *ngIf="personal.controls.residenceAddress.errors?.required">Address is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 2" rows="2" formControlName="residenceAddress2" autocomplete="off" [readonly]="inputReadonly"></textarea>
                                                    <mat-error *ngIf="personal.controls.residenceAddress2.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 3" rows="2" formControlName="residenceAddress3" autocomplete="off"></textarea>
                                                    <mat-error *ngIf="personal.controls.residenceAddress3.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="PIN Code"  pattern="[1-9][0-9]{5}" (keypress)="add($event)" minlength="6" [readonly]="inputReadonly"    maxlength="6" (input)="commonPincode($event.target.value, 'proposalR')" formControlName="residencePincode"autocomplete="off"  required>
                                                    <mat-error *ngIf="personal.controls.residencePincode.hasError('minlength')">Pin should be 6 digits</mat-error>
                                                    <mat-error *ngIf="personal.controls.residencePincode.hasError('required')">Pincode required</mat-error>
                                                    <mat-error *ngIf="personal.controls.residencePincode.hasError('pattern')">Enter Valid  Pin</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="State" formControlName="residenceState" autocomplete="off" required [readonly]="inputReadonly">
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Country" formControlName="residenceCountry" autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.residenceCountry.errors?.required">Country is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="District" formControlName="residenceDistrict" autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.residenceDistrict.errors?.required">District is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100" >
                                                    <input matInput placeholder="City" formControlName="residenceCity" autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.residenceCity.errors?.required">City is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="Area" formControlName="residenceArea" autocomplete="off" required >
                                                    <mat-error *ngIf="personal.controls.residenceArea.errors?.required">District is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Nearest Land Mark" formControlName="residenceNearestLandMark" autocomplete="off"  >
                                                </mat-form-field>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="proposal-buttom mt-3 text-right w-100">
                                        <button mat-raised-button color="primary"  (click)="personalDetails(stepper, personal.value)" >Next</button>
                                    </div>
                                </div>
                            </mat-expansion-panel>
                        </form>
                    </mat-accordion>
                </mat-step>
                <mat-step [stepControl]="">
                    <ng-template matStepLabel >INSURED DETAILS</ng-template>
                    <mat-accordion class="mt-4 w-100 float-left">
                        <form [formGroup]="insureArray">
                            <div formArrayName="items" *ngFor="let item of insureArray.get('items')['controls']; let i = index;">
                                <mat-expansion-panel  [formGroupName]="i" [expanded]="i == 0">
                                    <mat-expansion-panel-header>
                                        <mat-panel-title> {{insureArray['controls'].items['controls'][i]['controls'].type.value}} </mat-panel-title>
                                    </mat-expansion-panel-header>
                                    <ng-template matStepLabel>INSURED DETAILS </ng-template>
                                    <div class="row mt-3">
                                        <div class="col-md-12 box-card pt-3">
                                            <h6 class="color-green">INSURED DETAILS</h6>
                                            <div class="row">
                                                <div class="col-md-12 mb-3" *ngIf="i == 0">
                                                    <mat-checkbox formControlName="sameAsProposer" (change)="sameProposer($event)"><strong>Same as proposer</strong></mat-checkbox>
                                                </div>
                                                <div class="col-md-3">
                                                    <mat-form-field class="w-100">
                                                        <mat-select placeholder="Title" formControlName="personalTitle" (change)="insureChangeGender(i)">
                                                            <mat-option value="MR">Mr</mat-option>
                                                            <mat-option value="MS">Ms</mat-option>
                                                            <mat-option value="MRS">Mrs</mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="insureArray.invalid">Title is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-3">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="First Name" formControlName="personalFirstname"  (keypress)="data($event)" autocomplete="off" required [readonly]="insureArray['controls'].items['controls'][i]['controls'].sameAsProposer.value" >
                                                        <mat-error *ngIf="insureArray.invalid">First Name is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-3">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Mid Name" formControlName="personalMidname"  (keypress)="data($event)"   autocomplete="off">
                                                    </mat-form-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Last Name" formControlName="personalLastname"  (keypress)="data($event)" autocomplete="off" required [readonly]="insureArray['controls'].items['controls'][i]['controls'].sameAsProposer.value" >
                                                        <mat-error *ngIf="insureArray.invalid">Last Name is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Gender" formControlName="personalGender" required readonly autocomplete="off">
                                                        <mat-error *ngIf="insureArray.invalid">Gender is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <mat-select  placeholder="Marital Status" formControlName="maritalStatus" required  class="w-100" autocomplete="off">
                                                            <mat-option *ngFor="let status of maritalDetail" [value]= 'status.marital_status_id'> {{status.marital_status}} </mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="insureArray.invalid">Marital Status is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <input matInput [matDatepicker]="picker" [max]="today" placeholder="DOB (DD/MM/YYYY)"   formControlName="personalDob" (dateInput)="addEventInsurer( $event)" (dateChange)="addEventInsurer( $event)" (keypress)="add($event)" autocomplete="off" required [readonly]="insureArray['controls'].items['controls'][i]['controls'].sameAsProposer.value">
                                                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                                        <mat-datepicker #picker></mat-datepicker>
                                                        <mat-error *ngIf="insureArray.invalid">DOB is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Age" formControlName="personalAge"     autocomplete="off" autocomplete="off">
                                                        <mat-error *ngIf="insureArray.invalid">Age is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <mat-select  placeholder="Occupation" formControlName="occupation" required  class="w-100">
                                                            <mat-option *ngFor="let list of occupationList" [value]= 'list.occupation_id'> {{list.occupation_name}} </mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="insureArray.invalid">Occupation is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <mat-select placeholder="Relationship with Proposer"  formControlName="personalrelationship" required >
                                                            <mat-option *ngFor="let relationship of relationshipList" value="{{relationship.relationship_proposer_id}}" > {{relationship.relationship_proposer_name}} </mat-option>
                                                        </mat-select>
                                                        <mat-error *ngIf="personal.controls.personalrelationship.errors?.required">Relationship is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Height" formControlName="personalHeight" required  autocomplete="off">
                                                        <mat-error *ngIf="insureArray.invalid">Height is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-6">
                                                    <mat-form-field class="w-100">
                                                        <input matInput placeholder="Width" formControlName="personalWidth" required  autocomplete="off">
                                                        <mat-error *ngIf="insureArray.invalid">Width is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="proposal-buttom mt-3 text-right w-100" *ngIf="items.length -1 == i">
                                            <button mat-button matStepperPrevious>Back</button>
                                            <button mat-raised-button color="primary"  (click)="relianceInsureDetails(stepper, insureArray.value)">Next</button>
                                        </div>
                                    </div>
                                </mat-expansion-panel>
                            </div>
                        </form>
                    </mat-accordion>
                </mat-step>
                <mat-step [stepControl]="">
                    <ng-template matStepLabel>RISK DETAILS</ng-template>
                    <mat-accordion class="mt-4 w-100 float-left ">
                        <mat-expansion-panel expanded>
                            <mat-expansion-panel-header>
                                <mat-panel-title> {{groupName}} </mat-panel-title>
                            </mat-expansion-panel-header>
                            <ng-template matStepLabel>RISK DETAILS</ng-template>
                            <div class="row mt-2">
                                <div class="col-md-12 box-card pt-3 pb-3" >
                                    <h6 class="color-green mb-3" >RISK DETAILS</h6>
                                    <form [formGroup]="riskDetails">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="row">
                                                <div class="col-md-12 mb-3">
                                                    <p>Is service tax appliable</p>
                                                    <mat-radio-group formControlName="serviceTax">
                                                        <mat-radio-button value="Yes" class="mr-2">Yes</mat-radio-button>
                                                        <mat-radio-button value="No">No</mat-radio-button>
                                                    </mat-radio-group>
                                                </div>
                                                <div class="col-md-12  mb-3" *ngIf="riskDetails['controls'].serviceTax.value == 'Yes'">
                                                    <mat-form-field  class="w-100">
                                                        <mat-select placeholder="Services Tax" formControlName="ServicesTaxId" autocomplete="off" >
                                                            <mat-option *ngFor="let list of ServiceTaxId" value="list.servicetax_exemp_id">{{list.servicetax_exemp_name}}</mat-option>

                                                        </mat-select>
                                                        <mat-error *ngIf="riskDetails.controls.ServicesTaxId.errors?.required">Services Tax is required</mat-error>
                                                    </mat-form-field>
                                                </div>
                                                    <div class="col-md-12 mb-3">
                                                        <p>Is cross Sell</p>
                                                        <mat-radio-group formControlName="crossSell">
                                                            <mat-radio-button value="Yes" class="mr-2">Yes</mat-radio-button>
                                                            <mat-radio-button value="No">No</mat-radio-button>
                                                        </mat-radio-group>
                                                    </div>
                                                    <div class="col-md-12 mb-3"  *ngIf="riskDetails['controls'].crossSell.value == 'Yes'">
                                                        <mat-form-field class="w-100">
                                                            <input matInput placeholder="Cross Sell Policu No"  formControlName="crossSellPolicyNo" autocomplete="off" required>
                                                            <mat-error *ngIf="riskDetails.controls.crossSellPolicyNo.errors?.required">Cross Sell Policu No is required</mat-error>
                                                        </mat-form-field>
                                                    </div>
                                            </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="row">
                                            <div class="col-md-12 mb-3">
                                                <p>Is any employee of reliance ADAGroup</p>
                                                <mat-radio-group formControlName="relianceAda">
                                                    <mat-radio-button value="Yes" class="mr-2">Yes</mat-radio-button>
                                                    <mat-radio-button value="No">No</mat-radio-button>
                                                </mat-radio-group>
                                            </div>
                                            <div class="col-md-12" *ngIf="riskDetails['controls'].relianceAda.value == 'Yes'">
                                            <mat-form-field class="w-100">
                                                <input matInput placeholder="Company Name"  formControlName="companyname" autocomplete="off" required>
                                                <mat-error *ngIf="riskDetails.controls.companyname.errors?.required">Company Name is required</mat-error>
                                            </mat-form-field>
                                            </div>
                                            <div class="col-md-12" *ngIf="riskDetails['controls'].relianceAda.value == 'Yes'">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Employee Code"  formControlName="employeeCode" autocomplete="off" required>
                                                    <mat-error *ngIf="riskDetails.controls.employeeCode.errors?.required">Employee Code is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-12" *ngIf="riskDetails['controls'].relianceAda.value == 'Yes'">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Email Id"  formControlName="emailId" autocomplete="off" required>
                                                    <mat-error *ngIf="riskDetails.controls.emailId.errors?.required">Email ID is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                                </div>
                                            </div>

                                        </div>
                                    </form>

                                    <div class="proposal-buttom mt-3 text-right w-100">
                                        <button mat-button matStepperPrevious>Back</button>
                                        <button mat-raised-button color="primary"  (click)="riskDetail(stepper, riskDetails.value)">Next</button>
                                    </div>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-step>
                <mat-step>
                    <ng-template matStepLabel>NOMINEE DETAILS</ng-template>
                    <mat-accordion class="mt-4 w-100 float-left">
                        <mat-expansion-panel expanded>
                            <mat-expansion-panel-header>
                                <mat-panel-title> {{groupName}} </mat-panel-title>
                            </mat-expansion-panel-header>
                            <ng-template matStepLabel>INSURED DETAILS</ng-template>
                            <div class="row mt-3">
                                <div class="col-md-12 box-card pt-3 pb-3" >
                                    <h6 class="color-green mb-3" >NOMINEE DETAILS </h6>
                                    <form [formGroup]="nomineeDetails">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <mat-select placeholder="Title" formControlName="nomineeTitle">
                                                        <mat-option value="MR">Mr</mat-option>
                                                        <mat-option value="MS">Ms</mat-option>
                                                        <mat-option value="MRS">Mrs</mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeTitle.errors?.required">Title is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="First Name"  formControlName="nomineeFirstName" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeFirstName.errors?.required">First Name of Nominee is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Mid Name"  formControlName="nomineeMidName" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeMidName.errors?.required">Mid Name of Nominee is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-3">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Last Name"  formControlName="nomineeLastName" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeLastName.errors?.required"> Last Name of Nominee is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput [matDatepicker]="picker1" [max]="today" placeholder="DOB (DD/MM/YYYY)"   formControlName="nomineeDob" (dateInput)="addEvent( $event)" (dateChange)="addEvent( $event)"  (keypress)="add($event)"
                                                           autocomplete="off"   required>
                                                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                                                    <mat-datepicker #picker1></mat-datepicker>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeDob.errors?.required">DOB is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <mat-select placeholder="Relationship with Proposer"  formControlName="nomineeRelationship" required >
                                                        <mat-option *ngFor="let relationship of nomineeRelationshipList" value="{{relationship.nominee_relation_id}}" > {{relationship.nominee_relation_name}} </mat-option>
                                                    </mat-select>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeRelationship.errors?.required">Relationship with Proposer is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Relationship Otherr" formControlName="nomineeOtherRelationship" autocomplete="off" >
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeOtherRelationship.errors?.required">Relationship with Proposer is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 1" rows="2" formControlName="nomineeAddress" autocomplete="off" required></textarea>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeAddress.errors?.required">Address is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 2" rows="2" formControlName="nomineeAddress2" autocomplete="off" required></textarea>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeAddress2.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <textarea matInput placeholder="Address 3" rows="2" formControlName="nomineeAddress3" autocomplete="off"></textarea>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeAddress3.errors?.required">Address2 is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="PIN Code"  pattern="[1-9][0-9]{5}" (keypress)="add($event)" minlength="6"   maxlength="6" (input)="commonPincode($event.target.value, 'Nominee')" formControlName="nomineePincode" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineePincode.hasError('minlength')">Pin should be 6 digits</mat-error>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineePincode.hasError('required')">Pincode required</mat-error>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineePincode.hasError('pattern')">Enter Valid  Pin</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Country" formControlName="nomineeCountry" autocomplete="off" required readonly>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeCountry.errors?.required">Country is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="State" formControlName="nomineeState" autocomplete="off" required readonly>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeState.errors?.required">State is required</mat-error>
                                                </mat-form-field>
                                            </div>

                                            <div class="col-md-4">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="District" formControlName="nomineeDistrict" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeDistrict.errors?.required">District is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100" >
                                                    <input matInput placeholder="City" formControlName="nomineeCity" autocomplete="off" required>
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeCity.errors?.required">City is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field  class="w-100">
                                                    <input matInput placeholder="Area" formControlName="nomineeArea" autocomplete="off" required >
                                                    <mat-error *ngIf="nomineeDetails.controls.nomineeArea.errors?.required">Area is required</mat-error>
                                                </mat-form-field>
                                            </div>
                                            <div class="col-md-4">
                                                <mat-form-field class="w-100">
                                                    <input matInput placeholder="Nearest Land Mark" formControlName="nearestLandMark" autocomplete="off"  >
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="proposal-buttom mb-3 text-right w-100">
                                            <button mat-button matStepperPrevious>Back</button>
                                            <button mat-raised-button color="primary"   (click)="religareNomineeDetails(stepper, nomineeDetails.value)">Next</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </mat-step>
                <mat-step [stepControl]="">
                    <ng-template matStepLabel>SUMMARAY</ng-template>
                    <section class="summary-details" *ngIf="summaryData">
                        <div class="row">
                            <div class="col-md-4">
                                <h4>{{summaryData.group_name}} / <span style="font-size: 17px; color: #666;">Sum Insured: &nbsp;<i class="fas fa-rupee-sign"></i> {{buyProductdetails.suminsured_amount}}</span></h4>
                            </div>
                            <div class="col-md-8">
                                <ul class="summary-head">
                                    <li><span>Insurer:</span> &nbsp;<img src="{{webhost + '/' + buyProductdetails.company_logo}}" class="img-thumbnail" style="width: 125px;" /> </li>
                                    <li><span>Premium:</span> &nbsp; <span><i class="fas fa-rupee-sign"></i> {{summaryData.premium_amount}}</span> /</li>
                                    <li><span>Total Premium:</span> &nbsp;<span><i class="fas fa-rupee-sign"></i> {{summaryData.premium_amount}}</span> </li>
                                    <li></li>
                                </ul>
                            </div>
                        </div>
                        <section *ngFor="let item of summaryData.proposer_insurer_details">
                            <h5 class="mt-3 sub-title">{{item.role_cd}} DETAILS </h5>
                            <div class="row box-card">
                                <div class="col-md-12">
                                    <!--<h6>{{item.role_cd}} DETAILS</h6>-->
                                </div>
                                <div class="col-md-6">
                                    <div class="p-3">
                                        <ul class="m-0 list-group">
                                            <li class="list-group-item"><strong>Name:</strong> {{item.name_title}} {{item.first_name}} {{item.last_name}}</li>
                                            <li class="list-group-item"><strong>D.O.B:</strong> {{item.dob}}</li>
                                            <li class="list-group-item"><strong>Relationship Code:</strong> {{item.relationship_code}}</li>
                                            <li class="list-group-item"><strong>Personal Email Id:</strong> {{item.personal_email}}</li>
                                            <li class="list-group-item"><strong>Official Email Id:</strong> {{item.official_email}}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="p-3">
                                        <ul class="m-0 list-group">
                                            <li class="list-group-item"><strong>Aadhar Number:</strong> {{item.aadhar_no}}</li>
                                            <li class="list-group-item"><strong>PAN Number:</strong> {{item.pan_no}}</li>
                                            <li class="list-group-item"><strong>GST Number:</strong> {{item.gst_no}}</li>
                                            <li class="list-group-item"><strong>Mobile Number:</strong> {{item.mobile_std_code}}{{item.mobile_no}}</li>
                                            <li class="list-group-item"><strong>Resedential Number:</strong> {{item.resedential_contact_no}}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="p-3">
                                        <h6>{{item.role_cd}} COMMUNICATION DETAILS</h6>
                                        <ul class="m-0 list-group">
                                            <li class="list-group-item"><strong>Address 1:</strong> {{item.comm_address_line1}}</li>
                                            <li class="list-group-item"><strong>Address 2:</strong> {{item.comm_address_line2}}</li>
                                            <li class="list-group-item"><strong>PIN code:</strong> {{item.comm_pincode}}</li>
                                            <li class="list-group-item"><strong>City:</strong> {{item.comm_city}}</li>
                                            <li class="list-group-item"><strong>State:</strong> {{item.comm_state}}</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class=" p-3">
                                        <h6>{{item.role_cd}} RESIDENCE DETAILS</h6>
                                        <ul class="m-0 list-group">
                                            <li class="list-group-item"><strong>Address 1:</strong> {{item.res_address_line1}}</li>
                                            <li class="list-group-item"><strong>Address 2:</strong> {{item.res_address_line2}}</li>
                                            <li class="list-group-item"><strong>PIN code:</strong> {{item.res_pincode}}</li>
                                            <li class="list-group-item"><strong>City:</strong> {{item.res_city}}</li>
                                            <li class="list-group-item"><strong>State:</strong> {{item.res_state}}</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <h5 class="mt-3 sub-title">NOMINEE DETAILS </h5>
                        <div class="row box-card">
                            <div class="col-md-6">
                                <div class="p-3">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <ul class="m-0 list-group">
                                                <li class="list-group-item"><strong>Nominee name:</strong> {{summaryData.nominee_name}}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="p-3">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <ul class="m-0 list-group">
                                                <li class="list-group-item"><strong>Relationship with Proposer:</strong> {{summaryData.nominee_relationship}}</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="mt-2 pl-3">
                            <mat-checkbox [(ngModel)]="declaration">I hereby declare all  the  details provided above is correct</mat-checkbox>
                        </p>
                        <hr>
                        <div class="row">
                            <div class="col-md-12 text-center">
                                <form action={{summaryData.action}}  method='post' #form>
                                    <div>
                                        <input type='hidden' name='proposalNum' value={{summaryData.proposalNum}}/>
                                        <input type='hidden' name='returnURL' value={{summaryData.returnURL}}/>
                                    </div>
                                    <button mat-raised-button color="primary" [disabled]="!declaration" (click)="form.submit()">Pay Now</button>
                                </form>
                            </div>
                        </div>
                    </section>
                    <div class="proposal-buttom mt-3 text-right w-100">
                        <button mat-button matStepperPrevious>Back</button>
                    </div>
                </mat-step>
            </mat-horizontal-stepper>
        </div>
    </div>
</div>
