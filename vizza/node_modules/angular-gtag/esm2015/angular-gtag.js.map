{
  "version": 3,
  "file": "angular-gtag.js",
  "sources": [
    "ng://angular-gtag/out/src/gtag.module.ts",
    "ng://angular-gtag/out/src/gtag-event.directive.ts",
    "ng://angular-gtag/out/src/gtag.service.ts"
  ],
  "sourcesContent": [
    "import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { Gtag } from './gtag.service';\r\nimport { GtagEventDirective } from './gtag-event.directive';\r\n\r\nimport { RouterModule } from '@angular/router';\r\nimport { GtagConfig } from './interfaces';\r\n\r\n@NgModule({\r\n  declarations: [GtagEventDirective],\r\n  exports: [GtagEventDirective]\r\n})\r\nexport class GtagModule {\r\n  public static forRoot(config: GtagConfig): ModuleWithProviders {\r\n    return {\r\n      ngModule: GtagModule,\r\n      providers: [Gtag, { provide: 'config', useValue: config }]\r\n    };\r\n  }\r\n}\r\n",
    "import {\r\n  Directive,\r\n  HostListener,\r\n  Renderer2,\r\n  Input,\r\n  AfterViewInit,\r\n  ElementRef\r\n} from '@angular/core';\r\nimport { Gtag } from './gtag.service';\r\n\r\n@Directive({\r\n  selector: '[gtagEvent]'\r\n})\r\nexport class GtagEventDirective implements AfterViewInit {\r\n  @Input() trackOn: string;\r\n  @Input() action: string;\r\n  @Input() category: string;\r\n  @Input() params: any;\r\n\r\n  constructor(\r\n    private gtag: Gtag,\r\n    private renderer: Renderer2,\r\n    private el: ElementRef\r\n  ) {}\r\n\r\n  ngAfterViewInit() {\r\n    try {\r\n      this.renderer.listen(this.el.nativeElement, this.trackOn, () => {\r\n        this.gtag.event(this.action || this.trackOn, {\r\n          event_category: this.category,\r\n          ...this.params\r\n        });\r\n      });\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  }\r\n}\r\n",
    "import { Injectable, Inject } from '@angular/core';\r\nimport { GtagPageview, GtagEvent, GtagConfig } from './interfaces';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { tap, filter } from 'rxjs/operators';\r\ndeclare var gtag: any;\r\n\r\n@Injectable()\r\nexport class Gtag {\r\n  private mergedConfig: GtagConfig;\r\n  constructor(@Inject('config') gaConfig: GtagConfig, private router: Router) {\r\n    this.mergedConfig = { trackPageviews: true, ...gaConfig };\r\n    if (this.mergedConfig.trackPageviews) {\r\n      router.events\r\n        .pipe(\r\n          filter(event => event instanceof NavigationEnd),\r\n          tap(event => {\r\n            this.pageview();\r\n          })\r\n        )\r\n        .subscribe();\r\n    }\r\n  }\r\n\r\n  event(action: string, params: GtagEvent = {}) {\r\n    // try/catch to avoid cross-platform issues\r\n    try {\r\n      gtag('event', action, params);\r\n      this.debug('event', this.mergedConfig.trackingId, action, params);\r\n    } catch (err) {\r\n      console.error('Google Analytics event error', err);\r\n    }\r\n  }\r\n\r\n  pageview(params?: GtagPageview) {\r\n    try {\r\n      const defaults = {\r\n        page_path: this.router.url,\r\n        page_title: 'Angular App',\r\n        page_location: window.location.href\r\n      };\r\n\r\n      params = { ...defaults, ...params };\r\n      gtag('config', this.mergedConfig.trackingId, params);\r\n      this.debug('pageview', this.mergedConfig.trackingId, params);\r\n    } catch (err) {\r\n      console.error('Google Analytics pageview error', err);\r\n    }\r\n  }\r\n\r\n  config(params: any) {\r\n    try {\r\n      gtag('config', this.mergedConfig.trackingId, (params = {}));\r\n    } catch (err) {\r\n      console.error('Google Analytics config error', err);\r\n    }\r\n  }\r\n\r\n  set(params: any) {\r\n    try {\r\n      gtag('set', (params = {}));\r\n    } catch (err) {\r\n      console.error('Google Analytics set error', err);\r\n    }\r\n  }\r\n\r\n  private debug(...msg) {\r\n    if (this.mergedConfig.debug) {\r\n      console.log('angular-gtag:', ...msg);\r\n    }\r\n  }\r\n}\r\n"
  ],
  "names": [],
  "mappings": ";;;;;;;;AEAA,AAOA,MAAA,IAAA,CAAA;;;;;IAEE,WAAF,CAAgC,QAAhC,EAA8D,MAAc,EAA5E;QAA8D,IAA9D,CAAA,MAAoE,GAAN,MAAM,CAAQ;QACxE,IAAI,CAAC,YAAY,GAArB,MAAA,CAAA,MAAA,CAAA,EAA0B,cAAc,EAAE,IAAI,EAA9C,EAAmD,QAAQ,CAAE,CAAC;QAC1D,IAAI,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE;YACpC,MAAM,CAAC,MAAM;iBACV,IAAI,CACH,MAAM,CAAC,KAAK,IAAI,KAAK,YAAY,aAAa,CAAC,EAC/C,GAAG,CAAC,KAAK,IAFnB;gBAGY,IAAI,CAAC,QAAQ,EAAE,CAAC;aACjB,CAAC,CACH;iBACA,SAAS,EAAE,CAAC;SAChB;KACF;;;;;;IAED,KAAK,CAAC,MAAc,EAAE,MAAxB,GAA4C,EAAE,EAA9C;;QAEI,IAAI;YACF,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;YAC9B,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;SACnE;QAAC,wBAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,8BAA8B,EAAE,GAAG,CAAC,CAAC;SACpD;KACF;;;;;IAED,QAAQ,CAAC,MAAqB,EAAhC;QACI,IAAI;YACF,uBAAM,QAAQ,GAAG;gBACf,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG;gBAC1B,UAAU,EAAE,aAAa;gBACzB,aAAa,EAAE,MAAM,CAAC,QAAQ,CAAC,IAAI;aACpC,CAAC;YAEF,MAAM,GAAZ,MAAA,CAAA,MAAA,CAAA,EAAA,EAAoB,QAAQ,EAAK,MAAM,CAAE,CAAC;YACpC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;YACrD,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;SAC9D;QAAC,wBAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,iCAAiC,EAAE,GAAG,CAAC,CAAC;SACvD;KACF;;;;;IAED,MAAM,CAAC,MAAW,EAApB;QACI,IAAI;YACF,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,YAAY,CAAC,UAAU,GAAG,MAAM,GAAG,EAAE,EAAE,CAAC;SAC7D;QAAC,wBAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,+BAA+B,EAAE,GAAG,CAAC,CAAC;SACrD;KACF;;;;;IAED,GAAG,CAAC,MAAW,EAAjB;QACI,IAAI;YACF,IAAI,CAAC,KAAK,GAAG,MAAM,GAAG,EAAE,EAAE,CAAC;SAC5B;QAAC,wBAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,4BAA4B,EAAE,GAAG,CAAC,CAAC;SAClD;KACF;;;;;IAEO,KAAK,CAAC,GAAG,GAAG,EAAtB;QACI,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE;YAC3B,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,GAAG,GAAG,CAAC,CAAC;SACtC;;;;IA9DL,EAAA,IAAA,EAAC,UAAU,EAAX;;;;IAGA,EAAA,IAAA,EAAA,SAAA,EAAA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAe,MAAM,EAArB,IAAA,EAAA,CAAsB,QAAQ,EAA9B,EAAA,EAAA,EAAA;IAPA,EAAA,IAAA,EAAS,MAAM,GAAf;;;;;;;ADFA,AAaA,MAAA,kBAAA,CAAA;;;;;;IAME,WAAF,CACY,IADZ,EAEY,QAFZ,EAGY,EAHZ,EAAA;QACY,IAAZ,CAAA,IAAgB,GAAJ,IAAI,CAAhB;QACY,IAAZ,CAAA,QAAoB,GAAR,QAAQ,CAApB;QACY,IAAZ,CAAA,EAAc,GAAF,EAAE,CAAd;KACM;;;;IAEJ,eAAe,GAAjB;QACI,IAAI;YACF,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,EAAE,MAAhE;gBACQ,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAnD,MAAA,CAAA,MAAA,CAAA,EACU,cAAc,EAAE,IAAI,CAAC,QAAQ,EADvC,EAEa,IAAI,CAAC,MAAM,CAFxB,CAGU,CAAC;aACJ,CAAC,CAAC;SACJ;QAAC,wBAAO,GAAG,EAAE;YACZ,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;SACpB;KACF;;;IA1BH,EAAA,IAAA,EAAC,SAAS,EAAV,IAAA,EAAA,CAAW;gBACT,QAAQ,EAAE,aAAa;aACxB,EAAD,EAAA;;;;IAJA,EAAA,IAAA,EAAS,IAAI,GAAb;IALA,EAAA,IAAA,EAAE,SAAS,GAAX;IAGA,EAAA,IAAA,EAAE,UAAU,GAAZ;;;IAQA,SAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,EAAA;IACA,QAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,EAAA;IACA,UAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,EAAA;IACA,QAAA,EAAA,CAAA,EAAA,IAAA,EAAG,KAAK,EAAR,EAAA;;;;;;;ADjBA,AAYA,MAAA,UAAA,CAAA;;;;;IACS,OAAO,OAAO,CAAC,MAAkB,EAA1C;QACI,OAAO;YACL,QAAQ,EAAE,UAAU;YACpB,SAAS,EAAE,CAAC,IAAI,EAAE,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,CAAC;SAC3D,CAAC;;;;IATN,EAAA,IAAA,EAAC,QAAQ,EAAT,IAAA,EAAA,CAAU;gBACR,YAAY,EAAE,CAAC,kBAAkB,CAAC;gBAClC,OAAO,EAAE,CAAC,kBAAkB,CAAC;aAC9B,EAAD,EAAA;;;;;;;;;;;;;;;;;;"
}
